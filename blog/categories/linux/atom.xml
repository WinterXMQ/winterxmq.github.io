<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: linux | 落寞纷飞]]></title>
  <link href="http://WinterXMQ.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://WinterXMQ.github.io/"/>
  <updated>2014-11-09T07:36:35+00:00</updated>
  <id>http://WinterXMQ.github.io/</id>
  <author>
    <name><![CDATA[WinterXMQ]]></name>
    <email><![CDATA[WinterXMQ@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Arch Linux 安装Aur包管理器Yaourt]]></title>
    <link href="http://WinterXMQ.github.io/blog/2014/11/09/yaourt/"/>
    <updated>2014-11-09T06:07:30+00:00</updated>
    <id>http://WinterXMQ.github.io/blog/2014/11/09/yaourt</id>
    <content type="html"><![CDATA[<p>(1) 安装Yourt包管理器, 首先添加软件源, <code>sudo vim /etc/pacman.conf</code>, 在文件尾增加如下内容</p>

<pre><code class="bash">[archlinuxcn]
# The Chinese Arch Linux communities packages.
SigLevel = Optional TrustAll
Server   = http://repo.archlinuxcn.org/$arch
</code></pre>

<p>(2) 更新缓存, <code>sudo pacman -Syy</code></p>

<p>(3) 安装Yourt, <code>sudo pacman -S yaourt</code></p>

<p>(4) 安装Aurvote, <code>sudo pacman -S aurvote</code></p>

<p>(5) 配置aurvote, <code>aurvote --configure</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Arch Linux 下FTP服务器的搭建]]></title>
    <link href="http://WinterXMQ.github.io/blog/2014/11/08/ftp-setup/"/>
    <updated>2014-11-08T16:10:51+00:00</updated>
    <id>http://WinterXMQ.github.io/blog/2014/11/08/ftp-setup</id>
    <content type="html"><![CDATA[<p>为了方便BBS测试的文件上传, 就此搭建FTP服务器</p>

<h1>Install</h1>

<p>安装 <code>vsftpd</code></p>

<pre><code class="bash">&gt;&gt; sudo pacman -S vsftpd
</code></pre>

<p>启动 vsftpd 和 设置开机自启</p>

<pre><code class="bash">&gt;&gt; sudo systemctl enable vsftpd
&gt;&gt; sudo systemctl start vsftpd
</code></pre>

<h1>Configuration</h1>

<p>大多数的设置在 <code>/etc/vsftpd.conf</code>, 打开配置文件</p>

<pre><code class="bash">&gt;&gt; sudo vim /etc/vsftpd.conf
</code></pre>

<p>启用上传功能, <code>write_enable=YES</code></p>

<p>开启本地用户登录功能, <code>local_enable=YES</code></p>

<p>开启IPV6支持</p>

<pre><code class="bash">listen=NO
listen_ipv6=YES
</code></pre>

<p>自定义端口, 增加配置 <code>listen_port=2211</code>, 打开防火墙</p>

<pre><code class="bash">iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 2211 -j ACCEPT
</code></pre>

<p>增加用户设置</p>

<pre><code class="bash">&gt;&gt; sudo htpasswd -c /etc/vsftpd/.passwd Username
New password:
Re-type new password:
</code></pre>

<p>若以后想增加用户, 可以使用 <code>sudo htpasswd /etc/vsftpd/.passwd Username</code></p>

<p>这种方式增加的用户应该是不能被认证的, 用如下命令生成的密码替换</p>

<pre><code class="bash">&gt;&gt; openssl passwd -1
</code></pre>

<p>向PAM service注册认证数据库, <code>sudo vim /etc/pam.d/vsftpd</code>, 并增加如下内容</p>

<pre><code class="bash">auth required pam_pwdfile.so pwdfile /etc/vsftpd/.passwd
account required pam_permit.so
</code></pre>

<p>同时需要安装PAM对pwdfile的认证支持库, <code>sudo yaout pam_pwdfile</code>, Yaourt的安装见<a href="/blog/2014/11/09/yaourt/">Arch Linux 安装Aur包管理器Yaourt</a></p>

<p>在系统中增加ftp虚拟用户</p>

<pre><code class="bash">&gt;&gt; sudo useradd -d /srv/ftp -s/usr/bin/nologin -G ftp -M ftp
</code></pre>

<p>更改文件夹的所有人, <code>sudo chown -R ftp:ftp /srv/ftp</code></p>

<p>配置文件里增加如下信息</p>

<pre><code class="bash"># pointing to the correct PAM service file
pam_service_name=vsftpd
write_enable=YES
hide_ids=YES
listen=YES
connect_from_port_20=YES
anonymous_enable=NO
local_enable=YES
dirmessage_enable=YES
xferlog_enable=YES
chroot_local_user=YES
guest_enable=YES
guest_username=virtual
virtual_use_local_privs=YES
</code></pre>

<p>在用的过程中发现 FTP 不支持软链接的方式, 因此换成mount的方式来实现</p>

<pre><code class="bash">&gt;&gt; sudo mount --bind /path/to/source /srv/ftp/
</code></pre>

<p>接着重启vsftpd服务器就行了</p>

<h1>参考</h1>

<blockquote><p>(1) <a href="https://wiki.archlinux.org/index.php/Very_Secure_FTP_Daemon">https://wiki.archlinux.org/index.php/Very_Secure_FTP_Daemon</a></p>

<p>(2) <a href="http://www.cnblogs.com/acpp/archive/2010/02/08/1665876.html">http://www.cnblogs.com/acpp/archive/2010/02/08/1665876.html</a></p>

<p>(3) <a href="http://blog.chinaunix.net/uid-26263042-id-3230479.html">http://blog.chinaunix.net/uid-26263042-id-3230479.html</a></p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[BBS的本地测试环境的搭建]]></title>
    <link href="http://WinterXMQ.github.io/blog/2014/11/04/test-for-bbs/"/>
    <updated>2014-11-04T14:29:56+00:00</updated>
    <id>http://WinterXMQ.github.io/blog/2014/11/04/test-for-bbs</id>
    <content type="html"><![CDATA[<p>本地环境的LAMP环境安装见<a href="/blog/2014/10/28/lamp/">ArchLinux上搭建LAMP环境</a></p>

<p>这个地方主要讲bbs的备份和本地还原</p>

<h1>服务器备份</h1>

<p>文档数据的备份</p>

<pre><code class="bash">&gt;&gt; cd /var/www
&gt;&gt; tar czvf sns-data.tar.gz sns/
</code></pre>

<p>数据库的备份</p>

<pre><code class="bash">&gt;&gt; mysqldump -hHOSTNAME -uUSER -pPASSWORD DATABASENAME &gt; sns-date.sql
&gt;&gt; du -h sns-date.sql       ; 查看文件大小
</code></pre>

<h1>本地还原</h1>

<p>文档数据还原</p>

<pre><code class="bash">&gt;&gt; rm -rf /srv/http/*
&gt;&gt; tar zxvf sns-date.tar.gz -C /srv/http/sns
</code></pre>

<p>数据库还原</p>

<pre><code class="bash">&gt;&gt; mysql -uUSER -p
mysql&gt; create database `sns`;
mysql&gt; exit
Bye
&gt;&gt; mysql -uUSER -p sns &lt; sns-date.sql
</code></pre>

<h1>本地配置</h1>

<p>(1) 虚拟主机配置</p>

<p>以ArchLinux为例, apache是ArchLinux的默认安装</p>

<p>打开配置文件, <code>sudo vim /etc/httpd/conf/extra/httpd-vhosts.conf</code>, 做如下修改</p>

<pre><code class="bash">&lt;VirtualHost *:80&gt;
    DocumentRoot "/srv/http/sns"
    ServerName "bbs.winterxq.me"
    &lt;Directory "/srv/http/sns"&gt;
        Options Indexes FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<p>重启服务, <code>sudo systemctl restart httpd</code></p>

<p>(2) 设置apache和mysql的开机自启</p>

<pre><code class="bash">&gt;&gt; sudo systemctl enable httpd
&gt;&gt; sudo systemctl enable mysqld
</code></pre>

<p>(3) 设置文件夹所有权</p>

<pre><code class="bash">&gt;&gt; sudo chown -R http:http data/
&gt;&gt; sudo chown -R http:http config/
&gt;&gt; sudo chown -R http:http uc_server/data/
&gt;&gt; sudo chown -R http:http uc_client/data/cache/
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux中的正则表达式]]></title>
    <link href="http://WinterXMQ.github.io/blog/2014/10/31/shell-regular/"/>
    <updated>2014-10-31T12:18:44+00:00</updated>
    <id>http://WinterXMQ.github.io/blog/2014/10/31/shell-regular</id>
    <content type="html"><![CDATA[<p>POSIX<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> 定义了两种正则表达式语法:</p>

<p>1) BRE 基本正则表达式(Basic Regular Expression);</p>

<p>2) ERE 扩展的正则表达式(Extended Regular Expression)</p>

<p>大多数的Linux程序符合BRE规则</p>

<p><code>sed</code> 只支持大部分 BRE, 因为主要是受到速度的限制;</p>

<p><code>grep</code> 可以支持 ERE, 只是需要增加额外参数 <code>-E</code></p>

<p><code>gwak</code> 使用 BRE</p>

<h1>Regular Expression 中的基本字符集</h1>

<p>BRE定义语法符号</p>

<table>
<thead>
<tr>
<th style="text-align:left;">符号    </th>
<th style="text-align:left;"> 模式含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">. </td>
<td style="text-align:left;"> 匹配任何一个字符</td>
</tr>
<tr>
<td style="text-align:left;">[] </td>
<td style="text-align:left;"> 字符集匹配</td>
</tr>
<tr>
<td style="text-align:left;">[^] </td>
<td style="text-align:left;"> 字符集(取反)匹配</td>
</tr>
<tr>
<td style="text-align:left;">^ </td>
<td style="text-align:left;"> 匹配开始位置</td>
</tr>
<tr>
<td style="text-align:left;">$ </td>
<td style="text-align:left;"> 匹配结束位置</td>
</tr>
<tr>
<td style="text-align:left;">() </td>
<td style="text-align:left;"> 定义子表达式</td>
</tr>
<tr>
<td style="text-align:left;">\n </td>
<td style="text-align:left;"> 子表达式向前引用, 即表示重复, n在{1,9}之间</td>
</tr>
<tr>
<td style="text-align:left;">* </td>
<td style="text-align:left;"> 多次或者重复匹配(包括0次重复)</td>
</tr>
<tr>
<td style="text-align:left;">\ </td>
<td style="text-align:left;"> 转义符</td>
</tr>
<tr>
<td style="text-align:left;">[] </td>
<td style="text-align:left;"> 匹配括号内出现的字符, 如 [a-zA-Z0123]</td>
</tr>
<tr>
<td style="text-align:left;">p{n} </td>
<td style="text-align:left;"> 匹配p出现n次</td>
</tr>
<tr>
<td style="text-align:left;">p{n,} </td>
<td style="text-align:left;"> 匹配p至少出现n次</td>
</tr>
<tr>
<td style="text-align:left;">p{n,m} </td>
<td style="text-align:left;"> 匹配所有p出现的次数大于n小于m的情况</td>
</tr>
</tbody>
</table>


<p>ERE修改的语法符号</p>

<table>
<thead>
<tr>
<th style="text-align:left;">符号 </th>
<th style="text-align:center;"> 状态 </th>
<th style="text-align:left;"> 模式含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">? </td>
<td style="text-align:center;"> 新增 </td>
<td style="text-align:left;"> 多次匹配(包括0次)</td>
</tr>
<tr>
<td style="text-align:left;">+ </td>
<td style="text-align:center;"> 新增 </td>
<td style="text-align:left;"> 至少一次匹配</td>
</tr>
<tr>
<td style="text-align:left;"></td>
<td style="text-align:center;"> </td>
<td style="text-align:left;"> 新增 | 或运算, 匹配两个子表达式的合集</td>
</tr>
<tr>
<td style="text-align:left;">() /{m,n} </td>
<td style="text-align:center;"> 修改 </td>
<td style="text-align:left;"> <strong>注释:</strong> 不需要转义 (, ), {, } 这些符号</td>
</tr>
<tr>
<td style="text-align:left;">\n </td>
<td style="text-align:center;"> 取消 </td>
<td style="text-align:left;"> &hellip;&hellip;</td>
</tr>
</tbody>
</table>


<p>BRE 和 ERE 共享, 额外的一些定义:</p>

<p>特殊符号:</p>

<p>表一:</p>

<table>
<thead>
<tr>
<th style="text-align:left;">POSIX类 </th>
<th style="text-align:center;"> perl类 </th>
<th style="text-align:left;"> 描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">[:alnum:] </td>
<td style="text-align:center;">    </td>
<td style="text-align:left;"> 数字集+字母集</td>
</tr>
<tr>
<td style="text-align:left;">[:alpha:] </td>
<td style="text-align:center;"> \a </td>
<td style="text-align:left;"> 字母集</td>
</tr>
<tr>
<td style="text-align:left;">[:lower:] </td>
<td style="text-align:center;"> \l </td>
<td style="text-align:left;"> 小写字母集</td>
</tr>
<tr>
<td style="text-align:left;">[:upper:] </td>
<td style="text-align:center;"> \u </td>
<td style="text-align:left;"> 大写字母集</td>
</tr>
<tr>
<td style="text-align:left;">[:blank:] </td>
<td style="text-align:center;">    </td>
<td style="text-align:left;"> 空白字符集(空格+制表符)</td>
</tr>
<tr>
<td style="text-align:left;">[:space:] </td>
<td style="text-align:center;"> \s </td>
<td style="text-align:left;"> 所有空白字符(包括[:blank:])</td>
</tr>
<tr>
<td style="text-align:left;">[:cntrl:] </td>
<td style="text-align:center;">    </td>
<td style="text-align:left;"> 不可打印的控制字符集(退格, 删除&hellip;.)</td>
</tr>
<tr>
<td style="text-align:left;">[:digit:] </td>
<td style="text-align:center;"> \d </td>
<td style="text-align:left;"> 十进制数字</td>
</tr>
<tr>
<td style="text-align:left;">[:xdigit:] </td>
<td style="text-align:center;"> \x </td>
<td style="text-align:left;"> 十六进制数字</td>
</tr>
<tr>
<td style="text-align:left;">[:graph:] </td>
<td style="text-align:center;">    </td>
<td style="text-align:left;"> 可打印的非空白字符</td>
</tr>
<tr>
<td style="text-align:left;">[:print:] </td>
<td style="text-align:center;"> \p </td>
<td style="text-align:left;"> 可打印的字符</td>
</tr>
<tr>
<td style="text-align:left;">[:pumct:] </td>
<td style="text-align:center;">    </td>
<td style="text-align:left;"> 标点符号</td>
</tr>
</tbody>
</table>


<p>表二:</p>

<table>
<thead>
<tr>
<th style="text-align:center;">perl类 </th>
<th style="text-align:left;"> 等效POSIX </th>
<th style="text-align:left;"> 描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">\o </td>
<td style="text-align:left;"> [0-7] </td>
<td style="text-align:left;"> 八进制数字</td>
</tr>
<tr>
<td style="text-align:center;">\O </td>
<td style="text-align:left;"> [^0-7] </td>
<td style="text-align:left;"> 非八进制</td>
</tr>
<tr>
<td style="text-align:center;">\w </td>
<td style="text-align:left;"> [[:alnum:]] </td>
<td style="text-align:left;"> 单词</td>
</tr>
<tr>
<td style="text-align:center;">\W </td>
<td style="text-align:left;"> [^[:alnum:]] </td>
<td style="text-align:left;"> 非单词</td>
</tr>
<tr>
<td style="text-align:center;">\A </td>
<td style="text-align:left;"> [^[:alphha:]] </td>
<td style="text-align:left;"> 非字母</td>
</tr>
<tr>
<td style="text-align:center;">\L </td>
<td style="text-align:left;"> [^[:lower:]] </td>
<td style="text-align:left;"> 非小写字母</td>
</tr>
<tr>
<td style="text-align:center;">\U </td>
<td style="text-align:left;"> [^[:upper:]] </td>
<td style="text-align:left;"> 非大写字母</td>
</tr>
<tr>
<td style="text-align:center;">\S </td>
<td style="text-align:left;"> [^[:space:]] </td>
<td style="text-align:left;"> 非空白字符</td>
</tr>
<tr>
<td style="text-align:center;">\D </td>
<td style="text-align:left;"> [^[:digit:]] </td>
<td style="text-align:left;"> 非十进制数字</td>
</tr>
<tr>
<td style="text-align:center;">\X </td>
<td style="text-align:left;"> [^[:xdigit:]] </td>
<td style="text-align:left;"> 非十六进制数字</td>
</tr>
<tr>
<td style="text-align:center;">\P </td>
<td style="text-align:left;"> [^[:print:]] </td>
<td style="text-align:left;"> 非可打印字符</td>
</tr>
</tbody>
</table>


<p>一些特殊定义:</p>

<p>转义定义: <code>\r</code> (回车), <code>\n</code> (换行), <code>\b</code> (退格), <code>\t</code> (制表符), <code>\v</code> (垂直制表符), <code>\"</code> 和 <code>\'</code></p>

<h1>Regular Express 使用例子</h1>

<p>1) 匹配任何单一字符(ASCII) <code>.</code></p>

<p>2) 匹配行首 <code>^</code>, 例子如下</p>

<pre><code class="bash">&gt;&gt; ls -l | grep '^d'
drwxr-xr-x 6 xmq users   4096 10月 12 15:53 Code/
drwxr-xr-x 2 xmq users   4096 9月  30 02:41 pic/
</code></pre>

<p>3) 匹配行尾 <code>$</code></p>

<pre><code class="bash">^$   ---  匹配空行
^.%  ---  匹配单字符行
</code></pre>

<p>4) 匹配重复字符 <code>*</code></p>

<pre><code class="bash">ro*t  &lt;- 其中 rot, root, rooot 都符合其匹配结果
</code></pre>

<p>5) 特殊字符, 需要转义 <code>\</code></p>

<p>6) 匹配一个范围 <code>[]</code></p>

<pre><code class="bash">[0-9] or [0123456789]       &lt;- 匹配数字
[a-zA-Z]                    &lt;- 匹配所有大小写字母
[a-zA-Z0-9]                 &lt;- 匹配字母和数字
[a-zA-Z]*                   &lt;- 匹配所有单词
</code></pre>

<p>注意: 在 <code>[]</code> 中, <code>^</code> 表示否定的意思</p>

<pre><code class="bash">[^A-Za-z]                   &lt;- 匹配非字母
[^0-9]                      &lt;- 匹配非数字
</code></pre>

<p>7) 匹配重复出现多次 <code>\{\}</code></p>

<pre><code class="bash">A\{2\}B                     &lt;- 匹配 AAB
A\{2,\}B                    &lt;- 匹配 AAB AAAB AAAAB ...
A\{2,3\}B                   &lt;- 匹配 AAB AAAB
</code></pre>

<h1>参考文档</h1>

<p>1) <a href="http://blog.csdn.net/wklken/article/details/6429526">http://blog.csdn.net/wklken/article/details/6429526</a></p>

<p>2) <a href="http://blog.chinaunix.net/uid-23045379-id-2562051.html">http://blog.chinaunix.net/uid-23045379-id-2562051.html</a></p>

<p>3) <a href="http://blog.csdn.net/a627088424/article/details/15435873">http://blog.csdn.net/a627088424/article/details/15435873</a></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>Portable Operating System Interface, 即可移植操作系统接口, 定义了操作系统应该为应用程序提供的接口标准, 是IEEE为要在各种UNIX操作系统上运行的软件而定义的一系列API标准的总称, 其正式称呼为IEEE 1003, 而国际标准名称为ISO/IEC 9945, 信息来自<a href="http://baike.baidu.com/view/209573.htm?fr=aladdin">百度百科</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ArchLinux上搭建LAMP环境]]></title>
    <link href="http://WinterXMQ.github.io/blog/2014/10/28/lamp/"/>
    <updated>2014-10-28T05:37:56+00:00</updated>
    <id>http://WinterXMQ.github.io/blog/2014/10/28/lamp</id>
    <content type="html"><![CDATA[<p>为了给基于Discuz模板的BBS增加一个小功能而在本地ArchLinux虚拟机里搭建一个BBS的测试平台</p>

<h1>Apache And PHP Installation</h1>

<p>分别安装 apache php 和 php-apache组件</p>

<pre><code class="bash">&gt;&gt; sudo pacman -S apache php php-apache
</code></pre>

<p>启动 apache, <code>sudo systemctl start httpd</code></p>

<p>测试 php 环境</p>

<pre><code class="bash">&gt;&gt; sudo vim /srv/http/info.php
</code></pre>

<p>在文件中写下如下信息</p>

<pre><code class="php">&lt;?php phpinfo(); ?&gt;
</code></pre>

<p>打开网页测试效果</p>

<p>测试结果未生效, 在 apache 中启用 php</p>

<pre><code class="bash">&gt;&gt; sudo vim /etc/httpd/conf/httpd.conf
</code></pre>

<p>查找 <code>LoadModule dir_module modules/mod_dir.so</code> 下增加</p>

<pre><code class="bash">LoadModule php5_module modules/libphp5.so
</code></pre>

<p>同时在 <code>Include</code> 列表末尾增加</p>

<pre><code class="bash">Include conf/extra/php5_module.conf
</code></pre>

<p>由于在 ArchLinux 中 php-apache 下的 libphp5.so 无法和 mod_mpm_event 一起工作, 会有如下错误</p>

<pre><code class="bash">Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.  You need to recompile PHP.
AH00013: Pre-configuration failed
httpd.service: control process exited, code=exited status=1
</code></pre>

<p>有如下两种解决办法:</p>

<p>1) 对 apache php 等重新编译, 启用 thread safety(没试过)</p>

<p>2) 采用替换方法</p>

<p>使用 mod_mpm_prefork, 打开 <code>/etc/httpd/conf/httpd.conf</code>, 把</p>

<pre><code class="bash">LoadModule mpm_event_module modules/mod_mpm_event.so
</code></pre>

<p>替换成</p>

<pre><code class="bash">LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
</code></pre>

<p>重启 apache, <code>sudo systemctl restart httpd</code>, 打开网页测试 <code>info.php</code> 页面, 看到如下画面说明 PHP 启用成功</p>

<p><img src="http://img.vim-cn.com/85/64208227801a398d079fc7e0ffbb874a2e3241.jpg" alt="PHPinfo" /></p>

<h1>Mysql or MariaDB Installation</h1>

<p>安装 Mysql/MariaDB, <code>sudo pacman -S mysql</code></p>

<p>启用 pdo_mysql.so 和 mysqli.so, 打开 <code>sudo vim /etc/php/php.ini</code>, 分别去掉如下两条配置的注释符</p>

<pre><code class="bash">extension=pdo_mysql.so
extension=mysqli.so
</code></pre>

<p>目前的配置到此结束。</p>

<h1>关于Discuz的配置</h1>

<p>=====增加于 2014/11/4=======</p>

<p>首先把Discuz的文件放置到站点文档目录下, 初步配置一下权限</p>

<pre><code class="bash">&gt;&gt; sudo chmod -R 744 upload/    ; 把所有文件文件夹的权限调低
&gt;&gt; sudo chmod -R -x upload
&gt;&gt; sudo chmod -R +x upload      ; 这两个命令完成 取消文件的执行权限
&gt;&gt; sudo mv upload/* /sur/http/
</code></pre>

<blockquote><p>出现三个问题:</p>

<p>(1) GD库没安装</p>

<p>(2) 文件权限需要重启配置</p>

<p>(3) PHP不能正确连接mysql</p></blockquote>

<p>解决方案</p>

<p>(1) 安装GD库</p>

<pre><code class="bash">&gt;&gt; sudo pacman -S php-gd
</code></pre>

<p>配置php, 打开 <code>sudo vim /etc/php/php.ini</code>, 取消 <code>extension=gd.so</code></p>

<p>重启apache服务, <code>sudo systemctl retstart httpd</code></p>

<p>(2) 配置文件权限</p>

<pre><code class="bash">&gt;&gt; sudo chown -R http:http config
&gt;&gt; sudo chown -R http:http data
&gt;&gt; sudo chown -R http:http uc_client/data/cache
&gt;&gt; sudo chown -R http:http uc_server/data
</code></pre>

<p>(3) 检查mysql与php的情况</p>

<p>编辑php.ini, <code>sudo vim /etc/php/php.ini</code>, 确保一下三条处于打开的状态</p>

<pre><code class="bash">extension=mysql.so
extension=mysqli.so
extension=pdo_mysql.so
</code></pre>

<p>此外还要解决数据库初始化的问题</p>

<pre><code class="bash">&gt;&gt; sudo mysql_secure_installation
&gt;&gt; sudo systemctl restart mysqld
</code></pre>

<h1>参考文献</h1>

<p><a href="https://wiki.archlinux.org/index.php/Apache">https://wiki.archlinux.org/index.php/Apache</a></p>
]]></content>
  </entry>
  
</feed>
